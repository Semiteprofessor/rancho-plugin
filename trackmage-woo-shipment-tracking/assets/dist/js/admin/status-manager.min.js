"use strict";!function(d,a){var o={main:trackmageAdmin,statusManager:trackmageAdminStatusManager};d(a).on("click","#statusManager .row-actions .edit-status",function(a){var t=d(this).closest("tbody"),n=d(this).closest("tr"),i=d(n).data("status-is-custom"),s=d(n).data("status-name"),u=d(n).data("status-slug"),e=d(n).data("status-slug"),l=d(n).data("status-alias"),c=(d(t).children("tr.hidden").removeClass("hidden"),d(n).addClass("hidden"),d(t).children(".adjust-odd-even").remove(),d(t).children(".inline-edit-row").remove(),d('\n          <tr class="hidden adjust-odd-even"></tr>\n          <tr id="edit-'.concat(e,'" class="inline-edit-row">\n            <td colspan="4" class="colspanchange">\n              <fieldset class="inline-edit-col-left">\n                <legend class="inline-edit-legend">').concat(o.statusManager.i18n.edit,'</legend>\n                <div class="inline-edit-col">\n                  <label>\n                    <span class="title">').concat(o.statusManager.i18n.name,'</span>\n                    <span class="input-text-wrap"><input type="text" name="status_name" value="" /></span>\n                  </label>\n                  <label>\n                    <span class="title">').concat(o.statusManager.i18n.slug,'</span>\n                    <span class="input-text-wrap"><input type="text" name="status_slug" value="" /></span>\n                  </label>\n                  <label>\n                    <span class="title">').concat(o.statusManager.i18n.alias,'</span>\n                    <select name="status_alias">\n                      <option value="" selected="selected">').concat(o.main.i18n.noSelect,"</option>\n                      ").concat(Object.keys(o.statusManager.aliases).map(function(a){return'<option value="'.concat(a,'">').concat(o.statusManager.aliases[a],"</option>")}).join(""),'\n                    </select>\n                  </label>\n                </div>\n              </fieldset>\n              <div class="submit inline-edit-save">\n                <button type="button" class="button cancel alignleft">').concat(o.statusManager.i18n.cancel,'</button>\n                <button type="button" class="button button-primary save alignright">').concat(o.statusManager.i18n.update,'</button>\n                <span class="spinner"></span>\n                <br class="clear">\n              </div>\n            </div>\n            </td>\n          </tr>\n        ')));d(c).insertAfter(n),d.each(o.statusManager.used_aliases,function(a,t){l!==t?d(c).find("select[name=status_alias] option[value="+t+"]").eq(0).hide():(d(c).find("select[name=status_alias] option").removeAttr("selected"),d(c).find("select[name=status_alias] option[value="+t+"]").attr("selected","selected"))}),d(c).find('[name="status_name"]').val(s),d(c).find('[name="status_slug"]').val(e),d(c).find('[name="status_alias"]').val(l),1!==i&&d(c).find('[name="status_slug"], [name="status_name"]').prop("disabled",!0),d(c).find("button.cancel").on("click",function(){d(c).remove(),d(n).removeClass("hidden")}),d(c).find("button.save").on("click",function(){var a=d(this),t=d(c).find('[name="status_name"]'),s=d(c).find('[name="status_slug"]'),e=d(c).find('[name="status_alias"]'),t={action:"trackmage_update_status",security:o.statusManager.nonces.updateStatus,name:d(t).val(),currentSlug:u,slug:d(s).val(),alias:d(e).val(),isCustom:i};d.ajax({url:o.main.urls.ajax,method:"post",data:t,beforeSend:function(){trackmageToggleSpinner(a,"activate"),trackmageToggleFormElement(a,"disable")},success:function(a){a.success?(o.statusManager.used_aliases=a.data.result.used,e=a.data.result.name,t=a.data.result.slug,s=a.data.result.alias,d(n).find("[data-update-status-name]").html(e),d(n).data("status-name",e),d(n).find("[data-update-status-slug]").html(t),d(n).data("status-slug",t),d(n).find("[data-update-status-alias]").html(o.statusManager.aliases[s]||""),d(n).data("status-alias",s),d(".add-status select[name=status_alias] option").show(),d.each(o.statusManager.used_aliases,function(a,t){d(".add-status select[name=status_alias] option[value="+t+"]").hide()}),d(c).remove(),d(n).removeClass("hidden").effect("highlight",{color:"#c3f3d7"},500)):d(c).removeClass("hidden").effect("highlight",{color:"#ffe0e3"},500);var t,s,e={title:a.success?o.main.i18n.success:o.main.i18n.failure,message:a.data.message||(a.success?"":o.main.i18n.unknownError),type:a.success?"success":"failure"};trackmageAlert(e.title,e.message,e.type,!0)},error:function(){trackmageAlert(o.main.i18n.failure,o.main.i18n.unknownError,"failure",!0)},complete:function(){trackmageToggleSpinner(a,"deactivate"),trackmageToggleFormElement(a,"enable")}})})}),d("#statusManager .add-status #addStatus").on("click",function(a){var t=d(this),s=d('#statusManager .add-status [name="status_name"]'),e=d('#statusManager .add-status [name="status_slug"]'),n=d('#statusManager .add-status [name="status_alias"]'),s={action:"trackmage_add_status",security:o.statusManager.nonces.addStatus,name:d(s).val(),slug:d(e).val(),alias:d(n).val()};d.ajax({url:o.main.urls.ajax,method:"post",data:s,beforeSend:function(){trackmageToggleSpinner(t,"activate"),trackmageToggleFormElement(t,"disable")},success:function(a){a.success&&(t=a.data.result.name,n=a.data.result.slug,s=a.data.result.alias,e=d("#statusManager tbody"),t='\n            <tr id="status-'.concat(n,'" data-status-name="').concat(t,'" data-status-slug="').concat(n,'" data-status-alias="').concat(s,'" data-status-is-custom="1">\n              <td>\n                <span data-update-status-name>').concat(t,'</span>\n                <div class="row-actions">\n                  <span class="inline"><button type="button" class="button-link edit-status">').concat(o.statusManager.i18n.edit,'</button> | </span>\n                  <span class="inline delete"><button type="button" class="button-link delete-status">').concat(o.statusManager.i18n.delete,"</button></span>\n                </div>\n              </td>\n              <td><span data-update-status-slug>").concat(n,'</span></td>\n              <td colspan="2"><span data-update-status-alias>').concat(o.statusManager.aliases.hasOwnProperty(s)?o.statusManager.aliases[s]:"","</span></td>\n            </tr>\n          "),d(t).appendTo(e).effect("highlight",{color:"#c3f3d7"},500),o.statusManager.used_aliases=a.data.result.used,d(".add-status input, .add-status select").val(""),d(".add-status select.status_alias option").show(),d.each(o.statusManager.used_aliases,function(a,t){d(".add-status select[name=status_alias] option[value="+t+"]").hide()}));var t,s,e,n={title:a.success?o.main.i18n.success:o.main.i18n.failure,message:a.data.message||(a.success?"":o.main.i18n.unknownError),type:a.success?"success":"failure"};trackmageAlert(n.title,n.message,n.type,!0)},error:function(){trackmageAlert(o.main.i18n.failure,o.main.i18n.unknownError,"failure",!0)},complete:function(){trackmageToggleSpinner(t,"deactivate"),trackmageToggleFormElement(t,"enable")}})}),d(a).on("click","#statusManager .row-actions .delete-status",function(a){var t,s;confirm(o.statusManager.i18n.confirmDeleteStatus)&&(t=d(this).closest("tr"),s=d(t).data("status-slug"),s={action:"trackmage_delete_status",security:o.statusManager.nonces.deleteStatus,slug:s},d.ajax({url:o.main.urls.ajax,method:"post",data:s,beforeSend:function(){},success:function(a){a.success&&(d(t).effect("highlight",{color:"#ffe0e3"},500),setTimeout(function(){d(t).remove()},500),o.statusManager.used_aliases=a.data.result.used,d(".add-status select[name=status_alias] option").show(),d.each(o.statusManager.used_aliases,function(a,t){d(".add-status select[name=status_alias] option[value="+t+"]").hide()}));a={title:a.success?o.main.i18n.success:o.main.i18n.failure,message:a.data.message||(a.success?"":o.main.i18n.unknownError),type:a.success?"success":"failure"};trackmageAlert(a.title,a.message,a.type,!0)},error:function(){trackmageAlert(o.main.i18n.failure,o.main.i18n.unknownError,"failure",!0)}}))})}(jQuery,(window,document));